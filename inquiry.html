<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request AgriTerra Report</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f6; color: #333; display: flex; justify-content: center; padding: 40px 20px; }
        .form-container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); width: 100%; max-width: 500px; }
        
        .header { text-align: center; margin-bottom: 30px; }
        .brand { color: #27ae60; font-weight: bold; font-size: 2rem; margin: 0; }
        .subtitle { color: #7f8c8d; font-size: 1rem; margin: 5px 0 0 0; }

        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #2c3e50; font-size: 0.9rem; }
        input[type="text"], input[type="email"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; box-sizing: border-box; }
        
        /* Style for pre-filled, uneditable fields to show they are "locked" */
        input[readonly] { background-color: #ecf0f1; color: #7f8c8d; border: 1px solid #bdc3c7; cursor: not-allowed; }

        .btn { background: #27ae60; color: white; border: none; padding: 15px; border-radius: 5px; font-weight: bold; width: 100%; font-size: 1.1rem; cursor: pointer; transition: background 0.2s; margin-top: 10px; }
        .btn:hover { background: #219150; }
        
        .disclaimer { font-size: 0.8rem; color: #7f8c8d; text-align: center; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="form-container">
        <div class="header">
            <h1 class="brand">AgriTerra</h1>
            <p class="subtitle">Official Farm Bureau Deep-Dive Request</p>
        </div>

        <form id="agriterraForm" action="https://formspree.io/f/xdalljoz" method="POST">
            
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" name="Name" placeholder="Jane Doe" required>
            </div>

            <div class="form-group">
                <label for="emailAddress">Email Address</label>
                <input type="email" id="emailAddress" name="Email" placeholder="jane@example.com" required>
            </div>

            <div class="form-group">
                <label for="fbNumber">Farm Bureau Member ID (Optional)</label>
                <input type="text" id="fbNumber" name="Member_ID" placeholder="123456789">
            </div>

            <hr style="border: 0; border-top: 1px dashed #ccc; margin: 25px 0;">

            <div class="form-group">
                <label for="topic">Requested Report Topic</label>
                <input type="text" id="topic" name="Topic" readonly>
            </div>

            <div class="form-group">
                <label for="acres">Parcel Size (Acres)</label>
                <input type="text" id="acres" name="Acres" readonly>
            </div>

            <div class="form-group">
                <label for="coords">GPS Coordinates</label>
                <input type="text" id="coords" name="Coordinates" readonly>
            </div>

            <button type="submit" class="btn">Submit Request</button>
            <p class="disclaimer">A representative will contact you within 1-2 business days with your customized land report.</p>
        </form>
    </div>

    <script>
        // Use JavaScript's built-in URLSearchParams to read the web address
        const params = new URLSearchParams(window.location.search);
        
        // Grab the data from the URL
        const rawTopic = params.get('topic') || "General Inquiry";
        const acres = params.get('acres') || "Unknown";
        const lat = params.get('lat') || "Unknown";
        const lng = params.get('lng') || "Unknown";

        // Clean up the topic name for the form (e.g., turn "ag_value" into "Agricultural Value")
        const displayTitles = {
            'property': 'Property Information',
            'physical': 'Physical Characteristics',
            'regulatory': 'Regulatory Context',
            'infrastructure': 'Infrastructure Proximity',
            'ag_value': 'Agricultural Value',
            'market': 'Market Context',
            'risks': 'Risks & Trade-Offs',
            'insights': 'Plain-Language Insights'
        };
        const cleanTopic = displayTitles[rawTopic] || rawTopic;

        // Automatically inject the data directly into the HTML input fields!
        document.getElementById('topic').value = cleanTopic;
        document.getElementById('acres').value = acres;
        document.getElementById('coords').value = `${lat}, ${lng}`;
    </script>

</body>
</html>
